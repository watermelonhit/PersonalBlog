webpackJsonp([13],{"+yne":function(t,e){},"2hfY":function(t,e,n){"use strict";e.a=function(t){var e=new Date(t),n=(Date.now()-e)/1e3;if(n<30)return"刚刚";if(n<3600)return Math.ceil(n/60)+"分钟前";if(n<86400)return Math.ceil(n/3600)+"小时前";if(n<172800)return"1天前";return t}},"33ZO":function(t,e,n){"use strict";var o={name:"BaseHeader",props:{activeIndex:String,simple:{type:Boolean,default:!1}},data:function(){return{}},computed:{user:function(){return{login:0!=this.$store.state.account.length,avatar:this.$store.state.avatar}}},methods:{logout:function(){var t=this,e=this;this.$store.dispatch("logout").then(function(){t.$router.push({path:"/"})}).catch(function(t){"error"!==t&&e.$message({message:t,type:"error",showClose:!0})})}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-header",{staticClass:"me-area"},[o("el-row",{staticClass:"me-header"},[o("el-col",{staticClass:"me-header-left",attrs:{span:4}},[o("router-link",{staticClass:"me-title",attrs:{to:"/"}},[o("img",{attrs:{src:n("dLd/")}})])],1),t._v(" "),t.simple?[t._t("default")]:o("el-col",{attrs:{span:16}},[o("el-menu",{attrs:{router:!0,"menu-trigger":"click","active-text-color":"#5FB878","default-active":t.activeIndex,mode:"horizontal"}},[o("el-menu-item",{attrs:{index:"/"}},[t._v("首页")]),t._v(" "),o("el-menu-item",{attrs:{index:"/category/all"}},[t._v("文章分类")]),t._v(" "),o("el-menu-item",{attrs:{index:"/tag/all"}},[t._v("标签")]),t._v(" "),o("el-menu-item",{attrs:{index:"/archives"}},[t._v("文章归档")]),t._v(" "),o("el-menu-item",{attrs:{index:"/personalCenter"}},[t._v("个人中心")]),t._v(" "),o("el-col",{attrs:{span:4,offset:4}},[o("el-menu-item",{attrs:{index:"/write"}},[o("i",{staticClass:"el-icon-edit"}),t._v("写文章")])],1)],1)],1),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-menu",{attrs:{router:!0,"menu-trigger":"click",mode:"vertical","active-text-color":"#5FB878"}},[t.user.login?[o("el-submenu",[o("template",{slot:"title"},[o("img",{staticClass:"me-header-picture",attrs:{src:t.user.avatar}})]),t._v(" "),o("el-menu-item",{attrs:{index:"/personalCenter"}},[o("i",{staticClass:"el-icon-back"}),t._v("个人中心")]),t._v(" "),o("el-menu-item",{on:{click:t.logout}},[o("i",{staticClass:"el-icon-back"}),t._v("退出")])],2)]:[o("el-menu-item",{attrs:{index:"/login"}},[o("el-button",{attrs:{type:"text"}},[t._v("登录")])],1),t._v(" "),o("el-menu-item",{attrs:{index:"/register"}},[o("el-button",{attrs:{type:"text"}},[t._v("注册")])],1)]],2)],1)],2)],1)},staticRenderFns:[]};var r=n("VU/8")(o,a,!1,function(t){n("+yne")},null,null);e.a=r.exports},"75l9":function(t,e){t.exports={_from:"axios@0.21.4",_id:"axios@0.21.4",_inBundle:!1,_integrity:"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==",_location:"/axios",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"axios@0.21.4",name:"axios",escapedName:"axios",rawSpec:"0.21.4",saveSpec:null,fetchSpec:"0.21.4"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz",_shasum:"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575",_spec:"axios@0.21.4",_where:"A:\\java-space\\blog-dev(线下测试）\\blog-app",author:{name:"Matt Zabriskie"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},bugs:{url:"https://github.com/axios/axios/issues"},bundleDependencies:!1,bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}],dependencies:{"follow-redirects":"^1.14.0"},deprecated:!1,description:"Promise based HTTP client for the browser and node.js",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},homepage:"https://axios-http.com",jsdelivr:"dist/axios.min.js",keywords:["xhr","http","ajax","promise","node"],license:"MIT",main:"index.js",name:"axios",repository:{type:"git",url:"git+https://github.com/axios/axios.git"},scripts:{build:"NODE_ENV=production grunt build",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",examples:"node ./examples/server.js",fix:"eslint --fix lib/**/*.js",postversion:"git push && git push --tags",preversion:"npm test",start:"node ./sandbox/server.js",test:"grunt test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},typings:"./index.d.ts",unpkg:"dist/axios.min.js",version:"0.21.4"}},"7xIN":function(t,e){},IcnI:function(t,e,n){"use strict";var o=n("//Fk"),a=n.n(o),r=n("NYxO"),i=n("7+uW"),s=n("Moy7"),c=n("M9A7");i.default.use(r.a),e.a=new r.a.Store({state:{id:"",account:"",name:"",avatar:"",token:Object(s.a)()},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_ACCOUNT:function(t,e){t.account=e},SET_NAME:function(t,e){t.name=e},SET_AVATAR:function(t,e){t.avatar=e},SET_ID:function(t,e){t.id=e}},actions:{login:function(t,e){var n=t.commit;return new a.a(function(t,o){Object(c.b)(e.account,e.password).then(function(e){e.success?(n("SET_TOKEN",e.data),Object(s.c)(e.data),t()):o(e.msg)}).catch(function(t){o(t)})})},updateInfo:function(t,e){var n=t.commit,o=t.state;return new a.a(function(t,a){Object(c.e)(o.token,e.account,e.nickname,e.password).then(function(e){e.success?(n("SET_NAME",e.data.nickname),t(e)):(n("SET_ACCOUNT",""),n("SET_NAME",""),n("SET_AVATAR",""),n("SET_ID",""),Object(s.b)(),t(e))}).catch(function(t){n("SET_ACCOUNT",""),n("SET_NAME",""),n("SET_AVATAR",""),n("SET_ID",""),Object(s.b)(),a(t)})})},getUserInfo:function(t){var e=t.commit,n=t.state;return new a.a(function(t,o){Object(c.a)(n.token).then(function(n){n.success?(e("SET_ACCOUNT",n.data.account),e("SET_NAME",n.data.nickname),e("SET_AVATAR",n.data.avatar),e("SET_ID",n.data.id),t(n)):(e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(s.b)(),t(n))}).catch(function(t){e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(s.b)(),o(t)})})},logout:function(t){var e=t.commit,n=t.state;return new a.a(function(t,o){Object(c.c)(n.token).then(function(n){n.success&&(e("SET_TOKEN",""),e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(s.b)(),t())}).catch(function(t){o(t)})})},fedLogOut:function(t){var e=t.commit;return new a.a(function(t){e("SET_TOKEN",""),e("SET_ACCOUNT",""),e("SET_NAME",""),e("SET_AVATAR",""),e("SET_ID",""),Object(s.b)(),t()}).catch(function(t){reject(t)})},register:function(t,e){var n=t.commit;return new a.a(function(t,o){Object(c.d)(e.account,e.nickname,e.password).then(function(e){e.success?(n("SET_TOKEN",e.data),Object(s.c)(e.data),t()):o(e.msg)}).catch(function(t){o(t)})})}}})},M9A7:function(t,e,n){"use strict";e.b=function(t,e){var n={account:t,password:e};return Object(o.a)({url:"/api/login",method:"post",data:n})},e.c=function(t){return Object(o.a)({headers:{Authorization:t},url:"/api/logout",method:"get"})},e.a=function(t){return Object(o.a)({headers:{Authorization:t},url:"/api/users/currentUser",method:"get"})},e.d=function(t,e,n){var a={account:t,nickname:e,password:n};return Object(o.a)({url:"/api/register",method:"post",data:a})},e.e=function(t,e,n,a){var r={account:e,nickname:n,password:a};return Object(o.a)({headers:{Authorization:t},url:"/api/updateInfo",method:"post",data:r})};var o=n("OOvn")},Moy7:function(t,e,n){"use strict";e.a=function(){return localStorage.token},e.c=function(t){return localStorage.token=t},e.b=function(){return localStorage.removeItem("token")}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("fCJj");var o=n("qBF2"),a=n.n(o),r=n("7+uW"),i={name:"GoTop",data:function(){return{topShow:!1}},methods:{toTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.topShow=!1},needToTop:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;this.topShow=t>400}},mounted:function(){this.$nextTick(function(){window.addEventListener("scroll",this.needToTop)})}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.topShow,expression:"topShow"}],staticClass:"me-to-top",on:{click:this.toTop}},[e("i",{staticClass:"el-icon-caret-top"})])])},staticRenderFns:[]};var c={name:"App",components:{GoTop:n("VU/8")(i,s,!1,function(t){n("mtl4")},null,null).exports},provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.isRouterAlive?e("router-view"):this._e(),this._v(" "),e("go-top")],1)},staticRenderFns:[]};var l=n("VU/8")(c,u,!1,function(t){n("Oima")},null,null).exports,d=n("2X9z"),m=n.n(d),h=n("/ocq"),p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-footer",{staticClass:"me-area"},[e("div",{staticClass:"me-footer",staticStyle:{height:"60px"}},[e("p",[this._v("Customized by\n      "),e("strong",[e("router-link",{staticClass:"me-login-design-color",attrs:{to:"/"}},[this._v("watermelonhit")])],1),this._v(" "),e("br"),this._v(" "),e("Tag",[e("a",{attrs:{href:"https://beian.miit.gov.cn/",target:"_blank"}},[this._v("粤ICP备2021145515号")])])],1)])])},staticRenderFns:[]};var f=n("VU/8")({name:"BaseFooter",data:function(){return{}},methods:{},mounted:function(){}},p,!1,function(t){n("fp/U")},null,null).exports,v={name:"Home",data:function(){return{activeIndex:"/",footerShow:!0}},components:{"base-header":n("33ZO").a,"base-footer":f},beforeRouteEnter:function(t,e,n){n(function(e){e.activeIndex=t.path})},beforeRouteUpdate:function(t,e,n){"/"==t.path?this.footerShow=!0:this.footerShow=!1,this.activeIndex=t.path,n()}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("el-container",[e("base-header",{attrs:{activeIndex:this.activeIndex}}),this._v(" "),e("router-view",{staticClass:"me-container"}),this._v(" "),e("base-footer",{directives:[{name:"show",rawName:"v-show",value:this.footerShow,expression:"footerShow"}]})],1)],1)},staticRenderFns:[]};var _=n("VU/8")(v,g,!1,function(t){n("yIBL")},null,null).exports,b=n("IcnI"),T=n("Moy7");r.default.use(h.a);var w=new h.a({routes:[{path:"/write/:id?",component:function(t){return Promise.all([n.e(0),n.e(2)]).then(function(){return t(n("tgdm"))}.bind(null,n)).catch(n.oe)},meta:{requireLogin:!0}},{path:"",name:"Home",component:_,children:[{path:"/",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){return t(n("mlqX"))}.bind(null,n)).catch(n.oe)}},{path:"/personalCenter",component:function(t){return n.e(10).then(function(){return t(n("wvKB"))}.bind(null,n)).catch(n.oe)}},{path:"/log",component:function(t){return n.e(9).then(function(){return t(n("joCn"))}.bind(null,n)).catch(n.oe)}},{path:"/archives/:year?/:month?",component:function(t){return Promise.all([n.e(0),n.e(7)]).then(function(){return t(n("3/TF"))}.bind(null,n)).catch(n.oe)}},{path:"/messageBoard",component:function(t){return n.e(8).then(function(){return t(n("ncpC"))}.bind(null,n)).catch(n.oe)}},{path:"/view/:id",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){return t(n("u66k"))}.bind(null,n)).catch(n.oe)}},{path:"/:type/all",component:function(t){return Promise.all([n.e(0),n.e(11)]).then(function(){return t(n("4fko"))}.bind(null,n)).catch(n.oe)}},{path:"/:type/:id",component:function(t){return Promise.all([n.e(0),n.e(5)]).then(function(){return t(n("8wPo"))}.bind(null,n)).catch(n.oe)}}]},{path:"/login",component:function(t){return n.e(6).then(function(){return t(n("lmfZ"))}.bind(null,n)).catch(n.oe)}},{path:"/register",component:function(t){return n.e(4).then(function(){return t(n("tcoL"))}.bind(null,n)).catch(n.oe)}}],scrollBehavior:function(t,e,n){return{x:0,y:0}}});w.beforeEach(function(t,e,n){Object(T.a)()?"/login"===t.path?n({path:"/"}):0===b.a.state.account.length?b.a.dispatch("getUserInfo").then(function(t){n()}).catch(function(){m()({type:"warning",showClose:!0,message:"登录已过期"}),n({path:"/"})}):n():t.matched.some(function(t){return t.meta.requireLogin})?m()({type:"warning",showClose:!0,message:"请先登录哦"}):n()});var E=w,x=n("M4fF"),A=n.n(x),S=(n("7xIN"),n("2hfY"));r.default.config.productionTip=!1,r.default.use(a.a),Object.defineProperty(r.default.prototype,"$_",{value:A.a}),r.default.directive("title",function(t,e){document.title=t.dataset.title}),r.default.filter("format",S.a),new r.default({el:"#app",router:E,store:b.a,template:"<App/>",components:{App:l}})},OOvn:function(t,e,n){"use strict";var o=n("2X9z"),a=n.n(o),r=n("//Fk"),i=n.n(r),s=n("mtWM"),c=n.n(s),u=n("IcnI"),l=n("Moy7"),d=c.a.create({baseURL:Object({NODE_ENV:"production"}).BASE_API,timeout:1e4});d.interceptors.request.use(function(t){return u.a.state.token&&(t.headers["Oauth-Token"]=Object(l.a)()),t},function(t){i.a.reject(t)}),d.interceptors.response.use(function(t){"timeout"==t.headers.session_time_out&&u.a.dispatch("fedLogOut");var e=t.data;return 200!==e.code?90001===e.code?i.a.reject("error"):90002===e.code?(a()({type:"warning",showClose:!0,message:"未登录或登录超时，请重新登录哦"}),i.a.reject("error")):70001===e.code?(console.info("权限认证错误"),a()({type:"warning",showClose:!0,message:"你没有权限访问哦"}),i.a.reject("error")):i.a.reject(e.msg):t.data},function(t){return a()({type:"warning",showClose:!0,message:"连接超时"}),i.a.reject("error")}),e.a=d},Oima:function(t,e){},"dLd/":function(t,e,n){t.exports=n.p+"static/img/logo.2074514.png"},fCJj:function(t,e){},"fp/U":function(t,e){},mtl4:function(t,e){},yIBL:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.94a343d66ae920691fa9.js.map